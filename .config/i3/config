#!/bin/bash
# bash shebang for proper syntax highlighting...
# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

exec --no-startup-id dunst -config ~/.config/i3/dunst_config
exec_always --no-startup-id notify-send "i3 config start" -a i3 -r 1300

# use for global shortcuts
set $os_mod Mod4
# use for alternative similar commands
set $alt_mod Mod1
# use for 'superiour' command
set $add_mod Shift
# use for executive command
set $cmd_mod Control

set $up0 Up
set $left0 Left
set $down0 Down
set $right0 Right

set $gap 10
set $border 4

set $wL 100:LOCK
set $w0 0:零
set $w1 1:一
set $w2 2:二
set $w3 3:三
set $w4 4:四
set $w5 5:五
set $w6 6:六
set $w7 7:七
set $w8 8:八
set $w9 9:九
set $w10 10:十
set $w11 11:十一
set $w12 12:十二

set $floating_mod _FLOATING_
set $border_mod _BORDERLESS_

set $S_do ~/.config/i3/do.sh

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
#font pango:monospace 8

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
font pango:Roboto 8
# KanjiStrokeOrders Medium 8
# DejaVu Sans Mono 8

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $alt_mod

# kill focused window
bindsym $os_mod+$add_mod+q kill

# change focus
bindsym $os_mod+$up0 	focus up
bindsym $os_mod+$left0 	focus left
bindsym $os_mod+$down0 	focus down
bindsym $os_mod+$right0 focus right

# move focused window
bindsym $os_mod+$cmd_mod+$up0 		move up
bindsym $os_mod+$cmd_mod+$left0 	move left
bindsym $os_mod+$cmd_mod+$down0 	move down
bindsym $os_mod+$cmd_mod+$right0 	move right

# enter fullscreen mode for the focused container
bindsym $os_mod+$cmd_mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $os_mod+$cmd_mod+n layout stacking
bindsym $os_mod+$cmd_mod+b layout tabbed
bindsym $os_mod+$cmd_mod+g layout toggle split
# split in horizontal orientation
bindsym $os_mod+$cmd_mod+h split h
# split in vertical orientation
bindsym $os_mod+$cmd_mod+v split v

# change focus between tiling / floating windows
bindsym $os_mod+$cmd_mod+space focus mode_toggle

# toggle tiling / floating
bindsym $os_mod+$cmd_mod+$add_mod+space floating toggle

# focus the parent container
bindsym $os_mod+$cmd_mod+j focus parent

# focus the child container
bindsym $os_mod+$cmd_mod+m focus child

# resize window (you can also use the mouse for that)
mode "resize" {
		# These bindings trigger as soon as you enter the resize mode

		# Pressing left will shrink the window’s width.
		# Pressing right will grow the window’s width.
		# Pressing up will shrink the window’s height.
		# Pressing down will grow the window’s height.
		bindsym $up0 	resize shrink height 1 px
		bindsym $left0 	resize shrink width 1 px
		bindsym $down0 	resize grow height 1 px
		bindsym $right0 resize grow width 1 px

		# back to normal: Enter or Escape
		bindsym Return mode "default"
		bindsym Escape mode "default"
}

bindsym $os_mod+$cmd_mod+r mode "resize"

# switch to workspace
bindsym $os_mod+dead_circumflex workspace $w0
bindsym $os_mod+1 				workspace $w1
bindsym $os_mod+2 				workspace $w2
bindsym $os_mod+3 				workspace $w3
bindsym $os_mod+4 				workspace $w4
bindsym $os_mod+5 				workspace $w5
bindsym $os_mod+6 				workspace $w6
bindsym $os_mod+7 				workspace $w7
bindsym $os_mod+8 				workspace $w8
bindsym $os_mod+9 				workspace $w9
bindsym $os_mod+0 				workspace $w10
bindsym $os_mod+ssharp			workspace $w11
bindsym $os_mod+dead_acute		workspace $w12

bindsym $os_mod+Prior 	workspace prev
bindsym $os_mod+Next 	workspace next

# move focused container to workspace
bindsym $os_mod+$add_mod+dead_circumflex 	move container to workspace $w0
bindsym $os_mod+$add_mod+1 					move container to workspace $w1
bindsym $os_mod+$add_mod+2 					move container to workspace $w2
bindsym $os_mod+$add_mod+3 					move container to workspace $w3
bindsym $os_mod+$add_mod+4 					move container to workspace $w4
bindsym $os_mod+$add_mod+5 					move container to workspace $w5
bindsym $os_mod+$add_mod+6 					move container to workspace $w6
bindsym $os_mod+$add_mod+7 					move container to workspace $w7
bindsym $os_mod+$add_mod+8 					move container to workspace $w8
bindsym $os_mod+$add_mod+9 					move container to workspace $w9
bindsym $os_mod+$add_mod+0 					move container to workspace $w10
bindsym $os_mod+$add_mod+ssharp				move container to workspace $w11
bindsym $os_mod+$add_mod+dead_acute			move container to workspace $w12

bindsym $os_mod+$cmd_mod+Prior 	move container to workspace prev
bindsym $os_mod+$cmd_mod+Next 	move container to workspace next

# reload the configuration file
bindsym $os_mod+$cmd_mod+$add_mod+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $os_mod+$cmd_mod+$add_mod+r restart

bindsym $os_mod+$cmd_mod+e exec $S_do shutdown_menu $floating_mod

bindsym $os_mod+l workspace $wL; 	exec --no-startup-id "/home/manuel/Applications/i3lock-fancy/i3lock-blur-manuel"
bindsym $os_mod+$add_mod+l 			exec --no-startup-id "/home/manuel/Applications/i3lock-fancy/i3lock-blur-manuel"

bindsym $os_mod+k 			exec --no-startup-id xset dpms force off
bindsym $os_mod+$add_mod+k 	exec --no-startup-id "/home/manuel/Applications/i3lock-fancy/i3lock-blur-manuel" exec --no-startup-id xset dpms force off

# xmodmap:
#	 Shift: shift,
#	 Lock: caps_lock,
#	 Control: ctrl_l ctrl_r,
#	 Mod1: alt_l alt_gr,
#	 Mod2: num_lock,
#	 Mod3: -,
#	 Mod4: win,
#	 Mod5: -

bindsym $os_mod+F2 			exec --no-startup-id $S_do bright_dn 5
bindsym $os_mod+$add_mod+F2 exec --no-startup-id $S_do bright 5
bindsym $os_mod+F3 			exec --no-startup-id $S_do bright_up 5
bindsym $os_mod+$add_mod+F3 exec --no-startup-id $S_do bright 255

bindsym $os_mod+F6 			exec --no-startup-id $S_do vol_mt
bindsym $os_mod+F7 			exec --no-startup-id $S_do vol_dn 2
bindsym $os_mod+$add_mod+F7 exec --no-startup-id $S_do vol_dn 10
bindsym $os_mod+F8 			exec --no-startup-id $S_do vol_up 2
bindsym $os_mod+$add_mod+F8 exec --no-startup-id $S_do vol_up 10

#bindsym Mod4+Up exec xdotool key XF86AudioPlay # XF86AudioMute
#bindsym Mod4+Left exec xdotool key XF86AudioPrev # XF86AudioLowerVolume
#bindsym Mod4+Right exec xdotool key XF86AudioNext # XF86AudioRaiseVolume

#killall -SIGUSR1 dunst # pause
#killall -SIGUSR2 dunst # resume

bindsym $os_mod+e 							exec dolphin
bindsym $os_mod+$add_mod+e 					exec $S_do st-f ranger

bindsym $os_mod+f							exec $S_do xterm-f -T $floating_mod # konsole floating
bindsym $os_mod+$add_mod+f					exec $S_do st-f -t $floating_mod
bindsym $os_mod+$cmd_mod+$add_mod+f 		exec $S_do st-c-f -t $floating_mod

bindsym $os_mod+t 							exec konsole
bindsym $os_mod+$add_mod+t 					exec kdesu konsole
bindsym $os_mod+$cmd_mod+$add_mod+t 		exec $S_do st-f

bindsym $os_mod+$cmd_mod+Delete 			exec ksysguard
bindsym $os_mod+$cmd_mod+$add_mod+Delete 	exec systemmonitor

bindsym $os_mod+$cmd_mod+u 					exec --no-startup-id $S_do check-update
bindsym $os_mod+$cmd_mod+$add_mod+u 		exec --no-startup-id $S_do do-update

bindsym Print exec screengrab

#bindsym $os_mod+space exec --no-startup-id $S_do maximize $gap

bindsym $os_mod+w 							exec i3-input -F 'workspace "%s"' -P 'Go to: '
bindsym $os_mod+$add_mod+w 					exec i3-input -F 'move container to workspace "%s"' -P 'Move to: '
bindsym $os_mod+$cmd_mod+$add_mod+w 		exec i3-input -F 'rename workspace to "%s"' -P 'New name: '

bindsym $os_mod+$cmd_mod+t 					exec --no-startup-id $S_do transparent
#bindsym $os_mod+$cmd_mod+$add_mod+t 		exec --no-startup-id $S_do transparent_i

bindsym $os_mod+Tab 						scratchpad show
bindsym $os_mod+$add_mod+Tab 				move scratchpad

bindsym $os_mod+$add_mod+n 					exec --no-startup-id $S_do notify_help

#for_window [class="^.*"] border normal 4
for_window [class="^.*"] border pixel $border

#commands: xwininfo | xprop

# browser pop-ups
for_window [window_role="pop-up"]	floating enable

for_window [title=".*$floating_mod.*"]	floating enable
for_window [title=".*$border_mod.*"]	border none

for_window [class="Dasher"]		floating enable
for_window [class="Screengrab"]	floating enable

for_window [title="Moving — Dolphin"]	floating enable
for_window [title="Copying — Dolphin"]	floating enable

bindsym $os_mod+p border toggle
bindsym $os_mod+o border pixel $border

smart_gaps on
smart_borders on
#smart_borders no_gaps
gaps inner $gap
gaps outer 0

assign [class="Google Play Music Desktop Player"]	$w0
assign [class="google-chrome"]						$w1
assign [class="Atom"]								$w5
assign [class="konversation"]						$w9
assign [class="Pavucontrol"]						$w10
assign [class="kde5-nm-connection-editor"]			$w10
assign [title="_W10_"]								$w10

# ##### startup-apps	| start ##### # ----------*----------

exec --no-startup-id nitrogen --restore

exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Tap Time" 200
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Tap Move" 260
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Tap Durations" 220, 180, 100
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Scrolling Distance" -120, 120
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Two-Finger Scrolling" 1, 1
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Move Speed" 1.000000, 1.750000, 0.500000, 0.000000
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Tap Action" 0, 0, 0, 0, 1, 2, 3

exec --no-startup-id xset dpms 3600 5400 7200
exec --no-startup-id xset s 1800

#exec --no-startup-id kdesu chmod 775 /sys/class/backlight/radeon_bl0/brightness

exec --no-startup-id rm -rf ~/.config/i3/__border/*

exec_always --no-startup-id /usr/bin/compton --config /home/manuel/.config/compton/config

#exec --no-startup-id "i3-msg 'workspace $w10; append_layout /home/manuel/.config/i3/workspace-10.json'"

exec gpmdp
exec google-chrome
exec atom
exec konversation
exec pavucontrol
exec kde5-nm-connection-editor
exec $S_do st-f -t '_W10_' bluetoothctl
#exec $S_do st-c-f -t '_W10_' cava
# --desktop $w10

exec --no-startup-id kded4 && qdbus org.kde.kded /kded loadModule powerdevil

# ##### startup-apps	| -end- ##### # ----------*----------

# dark_grey
set $dark_background "#121314"
# light_grey
set $light_background "#222326"
# teal
set $primary_accent "#009688"
# pink
set $secondary_accent "#E91E63"
# white
set $white "#FFFFFF"

# start dmenu (a program launcher)
bindsym $os_mod+d exec --no-startup-id dmenu_run -nb $light_background -nf $primary_accent -sb $primary_accent -sf $dark_background
bindsym $os_mod+$add_mod+d exec --no-startup-id j4-dmenu-desktop --dmenu='dmenu -nb $light_background -nf $primary_accent -sb $primary_accent -sf $dark_background'
# -fn '<font>' currently not supported, see v4.6
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

 #					   nice-green: #198844
 # window border colour
 # class				 border	  backgr.	 text		indicator
 client.focused		     $dark_background  $light_background $primary_accent   $dark_background
 client.focused_inactive $light_background $primary_accent   $dark_background  $primary_accent
 client.unfocused		 $light_background $primary_accent   $white            $primary_accent
 client.urgent		     $dark_background  $secondary_accent $dark_background  $dark_background
 client.placeholder	     $dark_background  $primary_accent   $dark_background  $dark_background

 client.background	    $light_background

#base info bar
bar {
		id bar-0
		#height 20
		strip_workspace_numbers yes
		tray_output primary
		separator_symbol "❱" #⟩"
		status_command stdbuf -e0 -o0 ~/.config/i3status/bar_0.py
		colors {
				background $light_background
				statusline $white
				separator  $dark_background

#			    bar workspace icon colour
#				class				border				background	 		text
				focused_workspace	$dark_background	$primary_accent		$dark_background
				active_workspace	$dark_background	$light_background	$primary_accent
				inactive_workspace	$dark_background	$dark_background	$primary_accent
				urgent_workspace	$dark_background	$secondary_accent	$dark_background
				binding_mode		$dark_background	$secondary_accent	$dark_background
		}
}

# additional info bar
bar {
		id bar-1
		mode hide
		modifier $alt_mod
		#height 20
		workspace_buttons no
		tray_output none
		separator_symbol "❱" #⟩"
		status_command ~/.config/i3status/bar_1.py
		colors {
				background $light_background
				statusline $white
				separator  $dark_background

#			   bar workspace icon colour
#			   class			  border	 backgr.	 text
				focused_workspace  $dark_background $primary_accent   $dark_background
				active_workspace   $dark_background $light_background $primary_accent
				inactive_workspace $dark_background $dark_background  $primary_accent
				urgent_workspace   $dark_background $secondary_accent $dark_background
				binding_mode	   $dark_background $secondary_accent $dark_background
		}
}

# backup info bar
bar {
		id bar-2
		verbose yes
		mode hide
		modifier $cmd_mod
		workspace_buttons no
		tray_output none
		status_command ~/.config/i3status/debug.py
		#i3status -c ~/.config/i3status/config-1 | ~/.config/i3status/wrapper-1.py
}

exec_always --no-startup-id notify-send "i3 init finished" -a i3 -r 1300
